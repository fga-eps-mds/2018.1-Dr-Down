{% extends "core/base.html" %}
{% load static %}
{% load i18n %}

{% block title %}{% trans "User:" %} {{ object.username }}{% endblock %}

{% block css %}
  {{block.super}}
  <link href="{% static 'users/css/user_detail.css' %}" rel="stylesheet">
{% endblock %}

{% block content %}
<div class="container">
  {% if user.is_authenticated %}
    {% if user.patient and user.patient.have_procedures_almost_late %}
      <div class="alert alert-warning" role="alert">
          {% trans "Hey! You have procedures to be made."%} 
          <a href="{% url 'careline:checklist_list' %}" class="alert-link">{% trans "Click here to check it" %}.</a>
          <button type="button" class="close" data-dismiss="alert" aria-label="Close">
              <span aria-hidden="true">&times;</span>
          </button>
      </div>
    {% endif %}
    {% if user.responsible and user.responsible.have_patient_needing_atention %}
      <div class="alert alert-warning" role="alert">
        {% trans "One or more of your patients needs attention. Some procedures may be behind schedule."%} 
        <a href="{% url 'careline:checklist_list' %}" class="alert-link">{% trans "Click here to check it" %}.</a>
        <button type="button" class="close" data-dismiss="alert" aria-label="Close">
            <span aria-hidden="true">&times;</span>
        </button>
      </div>
    {% endif %}
  {% endif %}
</div>

<div class="container">

  <div class="row ">
    <div class="col-sm-12">
      <h2>{{ object.username }}</h2>
      {% if object.photo %}
        <img src="{{ object.photo.url }}" width="300px" class="float-left mr-1 mb-2">
      {% else %}
        <img src="{% static 'users/img/user.png' %}" class="float-left mr-1 mb-2">
      {% endif %}
      <form>
        {% if object.name %}
          <div class="form-group row mb-1">
            <label for="inputName" class="col-form-label pr-6 col-3 float-left"><strong>{% trans 'Name: '%}</strong></label>
            <div>
              <input class="form-control col-sm-3 " id="inputName" placeholder="{{ object.name }}" disabled>
            </div>
          </div>
        {% endif %}

        {% if object.gender %}
        <div class="form-group row mb-1">
          <label for="inputGender" class=" col-form-label pr-6 float-left pr-6 col-3"><strong>{% trans 'Gender: '%}</strong></label>
          <div>
            <input class="form-control col-sm-3" id="inputGender" placeholder="{{ object.get_gender_display }}" disabled>
          </div>
        </div>
        {% endif %}

        {% if object.telephone %}
          <div class="form-group row mb-1">
            <label for="inputTelephone" class=" col-form-label float-left col-3"><strong>{% trans 'Telephone: '%}</strong></label>
            <div>
              <input class="form-control col-sm-3" id="inputTelephone" placeholder="{{ object.telephone }}" disabled>
            </div>
          </div>
        {% endif %}

        {% if object.birthday %}
          <div class="form-group row mb-1">
            <label for="inputBirthday" class="col-form-label float-left col-3"><strong>{% trans 'Birthday: '%}</strong></label>
            <div>
              <input class="form-control col-sm-3" id="inputBirthday" placeholder="{{ object.birthday }}" disabled>
            </div>
          </div>
        {% endif %}
      </form>
    </div>
  </div>


  {% if user.employee %}

    <div class="col-sm-12">
      <form>
        <h3 class="text-secondary mb-2 mt-2">{% trans 'Employee' %}</h3>

        {% if employee_cpf %}
          <div class="form-group row mb-1">
            <label for="inputName" class=" col-form-label float-left mr-1 col-2"><strong>{% trans 'CPF: '%}</strong></label>
            <div>
              <input class="form-control col-sm-3" id="inputName" placeholder="{{ employee_cpf }}" disabled>
            </div>
          </div>
        {% endif %}

        {% if employee_department %}
          <div class="form-group row mb-1">
            <label for="inputName" class=" col-form-label float-left mr-1 col-2"><strong>{% trans 'Department: '%}</strong></label>
            <div>
              <input class="form-control col-sm-3" id="inputName" placeholder="{{ employee_department }}" disabled>
            </div>
          </div>
        {% endif %}
      </form>
    </div>
  </div>
</div>

  {% endif %}

  {% if user.healthteam %}

    <div class="col-sm-12">
      <form>
        <h3 class="text-secondary mb-2 mt-2"> {% trans 'Health Team' %} </h3>
        {% if health_team_cpf %}
          <div class="form-group row mb-1">
            <label for="inputName" class=" col-form-label float-left mr-2 pr-6 col-3"><strong>{% trans 'CPF: '%}</strong></label>
            <div>
              <input class="form-control col-sm-3" id="inputName" placeholder="{{ health_team_cpf }}" disabled>
            </div>
          </div>
        {% endif %}

        {% if health_team_register_number and health_team_council_acronym %}
        <div class="form-group row mb-1">
          <label for="inputName" class=" col-form-label float-left mr-2 col-3"><strong> {{ health_team_council_acronym }}: </strong></label>
          <div>
            <input class="form-control col-sm-3" id="inputName" placeholder="{{ health_team_register_number }}" disabled>
          </div>
        {% endif %}

        {% if health_team_registration_state %}
          <div class="form-group row mb-1">
            <label for="inputName" class=" col-form-label float-left mr-2 pr-5 col-3"><strong>{% trans 'Registration State: '%}</strong></label>
            <div>
              <input class="form-control col-sm-3" id="inputName" placeholder="{{ health_team_registration_state }}" disabled>
            </div>
          </div>
        {% endif %}

        {% if health_team_speciality %}
          <div class="form-group row mb-1">
            <label for="inputName" class=" col-form-label float-left mr-2 pr-6 col-3"><strong>{% trans 'Speciality: '%}</strong></label>
            <div>
              <input class="form-control col-sm-3 mb-3" id="inputName" placeholder="{{ health_team_speciality }}" disabled>
            </div>
          </div>
        {% endif %}
      </form>
    </div>
  </div>
</div>

  {% endif %}

  {% if user.patient %}

    <div class="col-sm-12">
      <form>
        <h3 class="text-secondary mb-2 mt-2"> {% trans 'Patient' %} </h3>
        {% if patient_ses %}
          <div class="form-group row mb-1">
            <label for="inputName" class="col-form-label mr-2 col-4 float-left"><strong>{% trans 'SES: '%}</strong></label>
            <div>
              <input class="form-control col-sm-3" id="inputName" placeholder="{{ patient_ses }}" disabled>
            </div>
          </div>
        {% endif %}

        {% if patient_priority %}
          <div class="form-group row mb-1">
            <label for="inputName" class=" col-form-label float-left mr-2 col-4"><strong>{% trans 'Priority: '%}</strong></label>
            <div>
              <input class="form-control col-sm-3" id="inputName" placeholder="{{ patient_priority }}" disabled>
            </div>
          </div>
        {% endif %}

        {% if patient_mother_name %}
          <div class="form-group row mb-1">
            <label for="inputName" class=" col-form-label float-left mr-2 col-4"><strong>{% trans 'Mother Name: '%}</strong></label>
            <div>
              <input class="form-control col-sm-3" id="inputName" placeholder="{{ patient_mother_name }}" disabled>
            </div>
          </div>
        {% endif %}

        {% if patient_father_name %}
          <div class="form-group row mb-1">
            <label for="inputName" class=" col-form-label float-left mr-2 col-4"><strong>{% trans 'Father Name: '%}</strong></label>
            <div>
              <input class="form-control col-sm-3" id="inputName" placeholder="{{ patient_father_name }}" disabled>
            </div>
          </div>
        {% endif %}

        {% if patient_ethnicity %}
          <div class="form-group row mb-1">
            <label for="inputName" class=" col-form-label float-left mr-2 col-4"><strong>{% trans 'Ethnicity: '%}</strong></label>
            <div>
              <input class="form-control col-sm-3" id="inputName" placeholder="{{ patient_ethnicity }}" disabled>
            </div>
          </div>
        {% endif %}

        {% if patient_sus_number %}
          <div class="form-group row mb-1">
            <label for="inputName" class=" col-form-label float-left mr-2 col-4"><strong>{% trans 'SUS: '%}</strong></label>
            <div>
              <input class="form-control col-sm-3" id="inputName" placeholder="{{ patient_sus_number }}" disabled>
            </div>
          </div>
        {% endif %}

        {% if patient_civil_registry_of_birth %}
          <div class="form-group row mb-1">
            <label for="inputName" class=" col-form-label float-left mr-2 col-4"><strong>{% trans 'Civil registry of birth: '%}</strong></label>
            <div>
              <input class="form-control col-sm-3" id="inputName" placeholder="{{ patient_civil_registry_of_birth }}" disabled>
            </div>
          </div>
        {% endif %}

        {% if patient_declaration_of_live_birth %}
          <div class="form-group row mb-1">
            <label for="inputName" class=" col-form-label float-left mr-2 col-4"><strong>{% trans 'Declaration of live birth: '%}</strong></label>
            <div>
              <input class="form-control col-sm-3" id="inputName" placeholder="{{ patient_declaration_of_live_birth }}" disabled>
            </div>
          </div>
        {% endif %}
      </form>
    </div>
  </div>
</div>
  {% endif %}

  {% if user.responsible %}

    <div class="col-sm-12">
      <form>
        <h3 class="text-secondary mb-2 mt-2"> {% trans 'Responsible' %} </h3>
        {% if responsible_cpf %}
        <div class="form-group row mb-1">
          <label for="inputName" class=" col-form-label float-left mr-2 col-1"><strong>{% trans 'CPF: '%}</strong></label>
          <div>
            <input class="form-control col-sm-3" id="inputName" placeholder="{{ responsible_cpf }}" disabled>
          </div>
        </div>
        {% endif %}

        {% for patient in responsible_patient %}

          <div class="form-group row mb-1">
            <label for="inputName" class=" col-form-label float-left mr-2 col-1"><strong>{% trans 'Patient: '%}</strong></label>
            <div>
              <input class="form-control col-sm-3" id="inputName" placeholder="{{ patient }}" disabled>
            </div>
          </div>

        {% endfor %}

      </form>

  {% endif %}

{% if object == request.user %}
<!-- Action buttons -->
  <div class="container">
    <div class="float-right" style="margin-bottom: 60px; padding-top: 60px;">
        <div class="form-group row mb-1">
        {% if user.responsible or user.healthteam%}
            <a class="btn btn-secondary" href="{% url 'users:patient_list' %}" role="button">{% trans 'My Patients' %}</a>
        {% endif %}

        {% if user.patient %}
            <a class="btn btn-secondary" href="{% url 'medicalrecords:list_medicalrecords' user.username %}" role="button">{% trans 'My Medical Records' %}</a>
            <a class="btn btn-secondary" href="{% url 'users:patient_list' %}" role="button">{% trans 'My Medical Follow-up Sheet' %}</a>
        {% endif %}

        <a class="btn btn-secondary" href="{% url 'users:update' %}" role="button">{% trans 'Edit data' %}</a>
        <a class="btn btn-secondary" href="{% url 'account_email' %}" role="button">{% trans 'Change E-Mail' %}</a>


          <a class=" btn btn-danger" href="{% url 'users:delete' %}" role="button">{% trans 'Delete' %}</a>
        <!-- Your Stuff: Custom user template urls -->
      </div>
    </div>
  </div>
</div>
<!-- End Action buttons -->
{% endif %}


</div>
{% endblock content %}
